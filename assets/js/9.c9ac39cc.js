(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{284:function(t,s,a){"use strict";a.r(s);var e=a(10),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"基础抽象概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基础抽象概念"}},[t._v("#")]),t._v(" 基础抽象概念")]),t._v(" "),s("h3",{attrs:{id:"runner"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#runner"}},[t._v("#")]),t._v(" "),s("code",[t._v("runner")])]),t._v(" "),s("p",[t._v("用来执行软件集成脚本的东西，"),s("code",[t._v("runner")]),t._v(" 的机器是需要能够通过网络访问 "),s("code",[t._v("GitLab")]),t._v(" 服务器")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("Shared Runner")]),t._v(" 场景：所有的工程都有可能需要在公司的服务器上进行编译、测试、部署等工作，这个时候注册一个"),s("code",[t._v("Shared Runner")]),t._v("供所有工程使用就很合适")]),t._v(" "),s("li",[s("code",[t._v("Specific Runner")]),t._v(" 场景：个人的电脑或者服务器上自动构建我参与的某个工程，这个时候注册一个 "),s("code",[t._v("Specific Runner")]),t._v(" 就很合适")])]),t._v(" "),s("h3",{attrs:{id:"pipleline"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pipleline"}},[t._v("#")]),t._v(" "),s("code",[t._v("pipleline")])]),t._v(" "),s("p",[t._v("一整个工作流")]),t._v(" "),s("h3",{attrs:{id:"stage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stage"}},[t._v("#")]),t._v(" "),s("code",[t._v("stage")])]),t._v(" "),s("p",[t._v("一整个工作流是由于多个 "),s("code",[t._v("stage")]),t._v(" 组成")]),t._v(" "),s("ul",[s("li",[t._v("如果两个任务对应的 "),s("code",[t._v("stage")]),t._v(" 名相同，则这两个任务会并行运行")]),t._v(" "),s("li",[t._v("下一个 "),s("code",[t._v("stage")]),t._v(" 关联的任务会等待上一个 "),s("code",[t._v("stage")]),t._v(" 执行成功后才继续运行，失败则不运行")])]),t._v(" "),s("h3",{attrs:{id:"job"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#job"}},[t._v("#")]),t._v(" "),s("code",[t._v("job")])]),t._v(" "),s("p",[t._v("每一个 "),s("code",[t._v("stage")]),t._v(" 由至少一个 "),s("code",[t._v("Job")]),t._v(" 组成")]),t._v(" "),s("h3",{attrs:{id:"image"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#image"}},[t._v("#")]),t._v(" "),s("code",[t._v("image")])]),t._v(" "),s("p",[t._v("镜像 指定一个任务 "),s("code",[t._v("（job）")]),t._v(" 所使用的 "),s("code",[t._v("docker")]),t._v(" 镜像")]),t._v(" "),s("h3",{attrs:{id:"only-except"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#only-except"}},[t._v("#")]),t._v(" "),s("code",[t._v("only / except")])]),t._v(" "),s("p",[t._v("当符合定义的策略时才会触发 "),s("code",[t._v("Pipelines")]),t._v(" 的执行，"),s("code",[t._v("except")]),t._v(" 则相反。")]),t._v(" "),s("h3",{attrs:{id:"variables"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#variables"}},[t._v("#")]),t._v(" "),s("code",[t._v("variables")])]),t._v(" "),s("p",[t._v("定义变量")]),t._v(" "),s("h2",{attrs:{id:"gitlab-ci-yml-示例说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gitlab-ci-yml-示例说明"}},[t._v("#")]),t._v(" "),s("code",[t._v(".gitlab-ci.yml")]),t._v(" 示例说明")]),t._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("stages")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 先定义几个阶段 ")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在yml加载完成之后就会在pipeline里出现三个stages stage的名称")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 是下边开始的最前边的名称 [ stage: assemble、stage: deploy、stage: success]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" assemble\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" deploy\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" success\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# stage的名称")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 对应第一个需要处理的阶段")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("stage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" assemble\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 需要在assemble的时候运行的脚本 `linux` 的命令")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ls "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("la\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" rm "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("rf node_module\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" pwd\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("stage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" deploy\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 依赖项目")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dependencies")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" name1\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 需要在deploy的时候运行的脚本")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("stage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" success\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 依赖项目")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dependencies")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" name2\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 需要在success的时候运行的脚本")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);