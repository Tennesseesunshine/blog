(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{285:function(t,s,a){"use strict";a.r(s);var n=a(10),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("在潜意识里使用最多的应该就是 "),s("code",[t._v("a")]),t._v(" 标签配合其他标签的 "),s("code",[t._v("id")]),t._v(" 属性去做页面锚点跳转，然而在有 "),s("code",[t._v("prompt")]),t._v(" 并且路由在变化的时候会导致一些问题。因为在设置了 "),s("code",[t._v("prompt")]),t._v(" 有数据的话会做离开页面数据不保存或者结束任务的提示逻辑，但是这个 "),s("code",[t._v("prompt")]),t._v(" 又是基于路由的变化来确定有没有触发，所以在使用传统的方法增加锚点的时候 "),s("code",[t._v("url")]),t._v(" 后会追加哈希值导致触发了 "),s("code",[t._v("url")]),t._v(" 变动，"),s("code",[t._v("prompt")]),t._v(" 没法简单判断出来目前是因为什么事件触发，从而导致在点击锚点的时候触发了 "),s("code",[t._v("prompt")]),t._v(" 提示。正好最近学习了 "),s("code",[t._v("scrollIntoView")]),t._v(" 就正好想着尝试解决一下。")]),t._v(" "),s("h2",{attrs:{id:"a-标签和-id"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#a-标签和-id"}},[t._v("#")]),t._v(" "),s("code",[t._v("a")]),t._v(" 标签和 "),s("code",[t._v("id")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置，用户点击并跳转")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("a href"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#anchorId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("锚点"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("a"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 待跳转标识的位置，使用id")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"anchorId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("跳转到锚点"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n在点击 “跳转到锚点"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("” 的时候就会在url中加入哈希从而实现锚点跳转\n")])])]),s("h2",{attrs:{id:"scrollintoview-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#scrollintoview-api"}},[t._v("#")]),t._v(" "),s("code",[t._v("scrollIntoView")]),t._v(" api")]),t._v(" "),s("ul",[s("li",[t._v("语法说明")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("element"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollIntoView")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 等同于element.scrollIntoView(true)")]),t._v("\nelement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollIntoView")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("alignToTop"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Boolean型参数")]),t._v("\nelement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollIntoView")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scrollIntoViewOptions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Object型参数")]),t._v("\n")])])]),s("ul",[s("li",[s("p",[t._v("参数说明")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("alignToTop")]),t._v("可选，一个"),s("code",[t._v("Boolean")]),t._v("值：")]),t._v(" "),s("ul",[s("li",[t._v("如果为"),s("code",[t._v("true")]),t._v("，元素的顶端将和其所在滚动区的可视区域的顶端对齐。相应的 "),s("code",[t._v('scrollIntoViewOptions: {block: "start", inline: "nearest"}')]),t._v("。这是这个参数的默认值。")]),t._v(" "),s("li",[t._v("如果为"),s("code",[t._v("false")]),t._v("，元素的底端将和其所在滚动区的可视区域的底端对齐。相应的"),s("code",[t._v('scrollIntoViewOptions: {block: "end", inline: "nearest”}')]),t._v("。")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("scrollIntoViewOptions")]),t._v(" 可选 一个包含下列属性的对象：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("behavior")]),t._v(" 可选 定义动画过渡效果， "),s("code",[t._v("auto")]),t._v("或 "),s("code",[t._v("smooth")]),t._v(" 之一。默认为 "),s("code",[t._v("auto")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("block")]),t._v(" 可选 定义垂直方向的对齐， "),s("code",[t._v("start")]),t._v(", "),s("code",[t._v("center")]),t._v(", "),s("code",[t._v("end")]),t._v(", 或 "),s("code",[t._v("nearest")]),t._v("之一。默认为 "),s("code",[t._v("start")]),t._v("。")]),t._v(" "),s("li",[s("code",[t._v("inline")]),t._v(" 可选 定义水平方向的对齐， "),s("code",[t._v("start")]),t._v(", "),s("code",[t._v("center")]),t._v(", "),s("code",[t._v("end")]),t._v(", 或 "),s("code",[t._v("nearest")]),t._v("之一。默认为 "),s("code",[t._v("nearest")]),t._v("。")])])])])]),t._v(" "),s("li",[s("p",[t._v("伪代码")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 因为有兼容问题，所以需要用第三方包来处理一下兼容")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" smoothscroll "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'smoothscroll-polyfill'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nsmoothscroll"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("polyfill")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在render之前为需要锚点的元素增加data-xxx属性，在触发对应的事件，需要锚点到对应的位置的时候利用api跳转")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果是数组循环下来的结构的话可以将对应的id传递给函数，点击的时候获取对应的元素并且再去执行操作")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("scrollToAnchor")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 利用属性选择器 + querySelector")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ele "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("[data-imageId=")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ele"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    ele"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollIntoView")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("block")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'start'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("behavior")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'smooth'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("img data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("imageId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"img"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div onClick"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollToAnchor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'img'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("跳转"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);